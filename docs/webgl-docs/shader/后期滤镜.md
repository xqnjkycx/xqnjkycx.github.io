# åæœŸæ»¤é•œ
**åæœŸæ»¤é•œ**ï¼Œæ˜¯åœ¨å›¾åƒæ¸²æŸ“ä¹‹åï¼Œå¯¹å…¶è¿›ä¸€æ­¥çš„å¤„ç†ã€‚ç”¨æ›´åŠ ç®€å•çš„è¯´æ³•å°±æ˜¯â€œæ»¤é•œâ€ã€‚

å¦‚æœæœ‰äº†è§£è¿‡`CSS`çš„å°ä¼™ä¼´åº”è¯¥çŸ¥é“`filter`è¿™ä¸ªå±æ€§ï¼Œé‡Œé¢æœ‰å„ç§å„æ ·çš„æ»¤é•œï¼ŒåŒ…æ‹¬æ¨¡ç³Šï¼Œäº®åº¦ï¼Œå¯¹æ¯”åº¦ï¼Œç°åº¦ï¼Œåè½¬ç­‰ã€‚

å’Œ`CSS`ä¸åŒçš„æ˜¯ï¼Œåœ¨Shaderçš„ä¸–ç•Œä¸­ï¼Œå¹¶æ²¡æœ‰ä»»ä½•å†…ç½®çš„æ»¤é•œå‡½æ•°å¯ä»¥ä½¿ç”¨ï¼Œè¦å®ç°é‚£äº›æ»¤é•œæ•ˆæœï¼Œåªèƒ½äº²è‡ªåŠ¨æ‰‹å»å†™å‡ºæ¥ã€‚è€Œä¸”Shaderèƒ½å®ç°çš„æ»¤é•œæ•ˆæœæ¯”`CSS`æ»¤é•œï¼Œ`SVG`æ»¤é•œï¼Œ`Canvas`æ»¤é•œç­‰è¦å¤šå¾—å¤šã€‚

## å¯åŠ¨æ¨¡ç‰ˆ
åŒæ ·ï¼Œæ–°å»ºä¸€ä¸ª`.glsl`æ–‡ä»¶ï¼Œå†™ä¸‹å¦‚ä¸‹ä»£ç ï¼š
```glsl
#iChannel0 "https://s2.loli.net/2023/09/10/QozT59R6KsYmb3q.jpg"

void mainImage(out vec4 fragColor,in vec2 fragCoord){
    vec2 uv = fragCoord / iResolution.xy;
    vec3 tex = texture(iChannel0,uv).xyz;
    fragColor = vec4(tex,1.);
}
```
ä¼šå‘ç°æ¸²æŸ“äº†ä¸€å¼ å›¾ï¼Œå’Œä¹‹å‰çš„æ–‡ç« **éšæœºä¸å™ªå£°**çš„å›¾ä¸€æ‘¸ä¸€æ ·ã€‚

## æŸ“è‰²
å®ç°çš„ç¬¬ä¸€ä¸ªç®€å•æ»¤é•œï¼Œå…¶å®ç°ä¹Ÿéå¸¸ç®€å•ï¼Œç›´æ¥ç»™è¾“å‡ºç»“æœä¹˜ä¸Šè¦æŸ“ä¸Šçš„é¢œè‰²å€¼å³å¯ã€‚
```glsl
#iChannel0"https://s2.loli.net/2023/09/10/QozT59R6KsYmb3q.jpg"

void mainImage(out vec4 fragColor,in vec2 fragCoord){
    vec2 uv=fragCoord/iResolution.xy;
    vec3 tex=texture(iChannel0,uv).xyz;
    vec3 col=tex;
    vec3 tintColor=vec3(.220,.380,.651);
    col*=tintColor;
    fragColor=vec4(col,1.);
}
```
![å¤œé—´æ»¤é•œ](./assets/å¤œé—´æ»¤é•œ.png)
å¯ä»¥çœ‹å‡ºè¿™æ˜¯ä¸€ä¸ªåå¤œé—´çš„æ»¤é•œã€‚

## RGBä½ç§»
åˆ©ç”¨rgbä½ç§»ï¼Œå¯ä»¥åšå‡ºç±»ä¼¼æŠ–éŸ³çš„`logo`ï¼š
![æŠ–éŸ³logo](./assets/æŠ–éŸ³logo.png)

æŠ–éŸ³`logo`çš„ä¸­é—´æ˜¯ä¸€ä¸ªç™½è‰²çš„éŸ³ç¬¦ï¼Œå¹¶ä¸”ç™½è‰²éŸ³ç¬¦çš„ä¸¤ä¾§æœ‰é’è‰²å’Œçº¢è‰²çš„æŠ•å½±ï¼Œè¿™2ä¸ªæŠ•å½±å…¶å®æ˜¯ä¸€ç§è‰²è°ƒåç§»æ•ˆæœçš„ä½“ç°ã€‚

å®ç°è¿™ç§æ•ˆæœå¯ä»¥é€šè¿‡`RGB`çš„ä½ç§»æ»¤é•œå®ç°ï¼Œå°†ç”»é¢çš„3ä¸ªé¢œè‰²åˆ†é‡`R`,`G`,`B`è¿›è¡Œä¸€å®šçš„åç§»ï¼Œä»è€Œäº§ç”Ÿä¸€ç§è‰²å·®çš„æ•ˆæœã€‚
![åç§»æ»¤é•œrgb](./assets/rgbåç§»æ»¤é•œ.png)

ä¹Ÿå¯ä»¥ä½¿ç”¨éšæœºå‡½æ•°æ¥è¿›è¡Œæ”¹å˜å›¾ç‰‡æ»¤é•œï¼š
```glsl
#iChannel0"https://s2.loli.net/2023/09/10/63quVIA9xZLksDc.jpg"

highp float random(vec2 co)
{
    highp float a=12.9898;
    highp float b=78.233;
    highp float c=43758.5453;
    highp float dt=dot(co.xy,vec2(a,b));
    highp float sn=mod(dt,3.14);
    return fract(sin(sn)*c);
}

void mainImage(out vec4 fragColor,in vec2 fragCoord){
    vec2 uv=fragCoord/iResolution.xy;
    vec2 rUv=uv;
    vec2 gUv=uv;
    vec2 bUv=uv;

    float noise = random(uv)*.5 + .5;
    vec2 offset = .05*vec2(cos(noise),sin(noise));
    
    rUv+=offset;
    bUv-=offset;
    
    vec4 rTex=texture(iChannel0,rUv);
    vec4 gTex=texture(iChannel0,gUv);
    vec4 bTex=texture(iChannel0,bUv);
    
    vec4 col=vec4(rTex.r,gTex.g,bTex.b,gTex.a);
    fragColor=col;
}
```
å¤åˆ¶è¿™æ®µä»£ç ï¼Œå¯ä»¥å¾—åˆ°ä¸€ä¸ªå¾®å¦™çš„ï¼Œå¸¦å™ªç‚¹çš„`RGB`å”¯ä¸€æ»¤é•œçš„æ•ˆæœã€‚

## è†¨èƒ€
åœ¨Shaderä¸­ï¼Œå¯ä»¥é€šè¿‡ä»£ç æ¥å®ç°è†¨èƒ€æ•ˆæœï¼Œåˆ›å»ºè†¨èƒ€å‡½æ•°`bulge`ã€‚
```
vec2 bulge(vec2 p){
    return p;
}
```
åœ¨ä¸»å‡½æ•°`mainImage`ä¸­åº”ç”¨è†¨èƒ€å‡½æ•°`bulge`ã€‚
```glsl
void mainImage(out vec4 fragColor,in vec2 fragCoord){
    vec2 uv=fragCoord/iResolution.xy;
    uv=bulge(uv);
    vec3 tex=texture(iChannel0,uv).xyz;
    fragColor=vec4(tex,1.);
}
```
æ¥ä¸‹æ¥å¼€å§‹ç¼–å†™è†¨èƒ€å‡½æ•°`bulge`ã€‚ç”¨`length`å‡½æ•°è®¡ç®—uvä¸Šæ¯ä¸ªç‚¹åˆ°åŸç‚¹çš„è·ç¦»ï¼Œä¸uvç›¸ä¹˜ã€‚
```glsl
void mainImage(out vec4 fragColor,in vec2 fragCoord){
    vec2 uv=fragCoord/iResolution.xy;
    uv=bulge(uv);
    float d=length(uv);
    uv*=d;
    vec3 tex=texture(iChannel0,uv).xyz;
    fragColor=vec4(tex,1.);
}
```
å¯ä»¥å‘ç°ï¼Œè†¨èƒ€çš„ä½ç½®ä¸å¯¹ï¼Œè¿™æ˜¯å› ä¸ºè†¨èƒ€çš„åœ†å¿ƒä¸åœ¨ç”»å¸ƒçš„æ­£ä¸­å¿ƒ
```glsl
vec2 center = vec2(.5);
```

å¯ä»¥åœ¨è°ƒç”¨`length`å‡½æ•°ä¹‹å‰ï¼Œå…ˆç»™uvå‡å»è¿™ä¸ªä¸­ç‚¹ï¼Œç„¶åè°ƒç”¨åå†åŠ å›å»
```glsl
uv -= center;

float d = length(p);
p*=d;

p+=center;
```
![è†¨èƒ€æ»¤é•œ](./assets/è†¨èƒ€æ»¤é•œ.png)

å¯ä»¥çœ‹å‡ºè¿™æ˜¯å‘å¤–è†¨èƒ€ï¼Œå®é™…ä¸Šä¹Ÿå¯ä»¥å®ç°å‘å†…åç¼©çš„æ•ˆæœã€‚åªéœ€è¦ç»™uvä¹˜ä¸Šè·ç¦»çš„å€’æ•°å³å¯
```
void mainImage(out vec4 fragColor,in vec2 fragCoord){
    vec2 uv=fragCoord/iResolution.xy;
    uv=bulge(uv);
    vec2 center=vec2(.5);
    uv-=center;
    // å‘å†…åç¼©
    float d=length(uv);
    float dPow=pow(d,2.);
    float dRev = 1./(dPow+1.);
    uv*=dRev;
    uv+=center;
    vec3 tex=texture(iChannel0,uv).xyz;
    fragColor=vec4(tex,1.);
}
```
![åç¼©æ»¤é•œ](./assets/åç¼©æ»¤é•œ.png)

å¦‚æ­¤å°±å¯ä»¥å®ç°å†…å‡¹çš„æ•ˆæœ

## åƒç´ åŒ–
åƒç´ åŒ–ç±»ä¼¼äºèƒ½å°†å›¾ç‰‡ï¼Œè§†é¢‘ç­‰åª’ä½“çš„ç‰¹å®šåŒºåŸŸå˜æˆä¸€å¨æ–¹å—ï¼Œèµ·åˆ°é®æŒ¡æ•æ„Ÿä¿¡æ¯çš„ä½œç”¨ã€‚

åœ¨Shaderä¸­ï¼Œæœ‰ä¸€ä¸ªæ–°çš„å†…ç½®å‡½æ•°`floor`ï¼Œè¿™ä¸ªå‡½æ•°çš„ä½œç”¨åœ¨äºå‘ä¸‹å–æ•´ï¼Œæ¯”å¦‚
`floor(114.514)`å°±ç­‰äº`114.`ã€‚

ç›´æ¥è¾“å‡ºuvåæ ‡
```glsl
void mainImage(out vec4 fragColor,in vec2 fragCoord){
    vec2 uv=fragCoord/iResolution.xy;
    float c = uv.x;
    c = floor(c*10.)/10.;
    fragColor = vec4(vec3(c),1.);
}
```
å¯ä»¥å¾—åˆ°è¿™æ ·çš„èƒŒæ™¯å›¾
![åƒç´ æ•ˆæœå›¾](./assets/åƒç´ æ•ˆæœå›¾.png)
å½“`x`åæ ‡äº`(0.,0.09)`æ—¶ï¼Œ`x*10`çš„å€¼åŸŸä¸º`(0.,0.9)`ï¼Œè€Œ`floor`å‡½æ•°å‘ä¸‹å–æ•´ï¼Œå› æ­¤`floor(x*10)`çš„å€¼æ˜¯`0`ï¼Œé™¤ä»¥`10`åè¿˜æ˜¯`0`ï¼›ä½†å½“`x`åæ ‡ä½äº`0.1`æ—¶ï¼Œ`x*10`å°±å˜æˆäº†`1`ï¼Œå‘ä¸‹å–æ•´çš„ç»“æœå°±ä»`0`å˜æˆäº†`1`ï¼Œé™¤ä»¥`10`åå°±å˜æˆäº†`0.1`ï¼›åé¢çš„èŒƒå›´çš„å€¼ä¼šä»¥æ­¥é•¿`0.1`é€’å¢ï¼Œå…¬å¼æ€»ä½“æ˜¯é˜¶æ¢¯çš„å½¢çŠ¶ã€‚

ç†è§£è¿™ä¸ªå…¬å¼å«ä¹‰ä¹‹åï¼Œå…ˆå¯¹åŸå…ˆçš„çº¹ç†é‡‡æ ·ã€‚
```glsl
    vec2 uv=fragCoord/iResolution.xy;
    vec3 tex=texture(iChannel0,uv).xyz;
    fragColor=vec4(tex,1.);
```
åœ¨é‡‡æ ·ä¹‹å‰ï¼Œå®šä¹‰å¥½åƒç´ åŒ–çš„å¤§å°`size`ï¼ˆè¿™é‡Œå–50*50ï¼‰ï¼Œä¹Ÿå°±æ˜¯ä¸Šæ–‡ä¸­çš„`10`ï¼Œå¯¹uvçš„`xy`è½´åˆ†åˆ«åº”ç”¨`floor`å‡½æ•°ã€‚
```glsl
void mainImage(out vec4 fragColor,in vec2 fragCoord){
    vec2 uv=fragCoord/iResolution.xy;
    vec2 size=vec2(50.,50.);
    uv.x=floor(uv.x*size.x)/size.x;
    uv.y=floor(uv.y*size.y)/size.y;
    vec3 tex=texture(iChannel0,uv).xyz;
    fragColor=vec4(tex,1.);
}
```
æœ€åå¯ä»¥å¾—åˆ°ä¸€å¼ åƒç´ åŒ–çš„ç…§ç‰‡ï¼Œæœ‰ç‚¹æˆ‘çš„ä¸–ç•Œçš„æ„Ÿè§‰äº†ğŸ˜
![åƒç´ æ»¤é•œ](./assets/åƒç´ æ»¤é•œ.png)

## æ™•å½±
æœ‰çš„æ—¶å€™å¯ä»¥å¾—åˆ°ä¸€å¼ æ»¤é•œï¼Œç…§ç‰‡çš„å››å‘¨æœ‰ä¸€å±‚æ·¡æ·¡çš„é˜´å½±ï¼Œä¼šæ„Ÿè§‰éå¸¸é…·ï¼Œè¿™æ˜¯æ‘„å½±å­¦çš„ä¸€ä¸ªä¸“ä¸šåç§° â€”â€”â€”â€” â€œæ™•å½±â€ã€‚

ä¸ºäº†æ›´å¥½çš„å®ç°è¿™ä¸ªæ•ˆæœï¼Œå°†ç”»é¢å˜ä¸ºçº¯ç™½è‰²

```glsl
vec3 col=vec3(1.);

fragColor=vec4(col,1.);
```
æ¥ç€åˆ›å»ºä¸€ä¸ªåœ†å½¢æ¸å˜ï¼Œè€Œä¸”è¿™ä¸ªæ•ˆæœéœ€è¦æ‹‰ä¼¸è¦†ç›–è‡³æ•´ä¸ªç”»é¢ï¼Œå› æ­¤æ— éœ€è¿›è¡Œç”»å¸ƒæ¯”ä¾‹çš„ä¿®æ­£ã€‚
```glsl
void mainImage(out vec4 fragColor,in vec2 fragCoord){
    vec2 uv = fragCoord / iResolution.xy;
    vec3 col = vec3(1.);

    vec2 p = uv;
    p -= .5;
    float d = length(p);
    col = vec3(d);

    fragColor = vec4(col,1.);
}
```
çœ‹åˆ°å¾„å‘æ¸å˜åï¼Œæ³¨é‡Šæ‰`col=vec3(d);`,ç”¨`smoothstep`å‡½æ•°æ¥å°†è¿™ä¸ªæ¸å˜â€œæ‹‰ä¼¸â€åˆ°ç”»é¢çš„å››ä¸ªè¾¹ç•Œï¼Œè€Œä¸”2ä¸ªè¾¹ç•Œå€¼çš„å·®ç¨å¾®å¤§ç‚¹ï¼Œèƒ½è¥é€ ä¸€ç§æ¨¡ç³Šçš„æ•ˆæœã€‚

```glsl
float c = smoothstep(.4,.8,d);
col = vec3(c);
```
![æ¨¡ç³Šé®ç½©](./assets/æ¨¡ç³Šé®ç½©.png)
æ¥ä¸‹æ¥çš„ä¸€æ­¥éå¸¸å…³é”®ï¼šå°†æ¸å˜åè½¬è¿‡æ¥ï¼Œå°±å¯ä»¥å¾—åˆ°å››å‘¨é®ç½©äº†ã€‚
```glsl
float c=smoothstep(.8,.4,d);
```
æœ€åå°±å¯ä»¥å¾—åˆ°è¿™æ ·ä¸€ä¸ªæ™•å½±æ»¤é•œçš„æ•ˆæœï¼š
![æ™•å½±æ»¤é•œ](./assets/æ™•å½±æ»¤é•œ.png)