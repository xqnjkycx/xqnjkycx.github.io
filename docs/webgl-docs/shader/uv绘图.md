# UVæ‰æ˜¯çœŸç¥

UVä½ å¯ä»¥ç†è§£ä¸ºæ˜¯å±å¹•ä¸Šçš„ä¸€ç±»åæ ‡ï¼Œç‰¹ç§°`UVåæ ‡`

## UVåæ ‡
ä»æœ€åŸºæœ¬çš„`Shader`ä¸»ä½“å¼€å§‹å§ğŸ˜„

åœ¨Shaderä¸­ï¼Œä¸€ä¸ªå˜é‡çš„å€¼åŸºæœ¬éƒ½æ˜¯åˆ†å¸ƒåœ¨`[0.,1.]`ä¹‹é—´çš„ï¼Œè€Œç°åœ¨çš„è¾“å…¥åæ ‡çš„å€¼è¿œè¿œåœ°è¶…è¿‡äº†å®ƒï¼Œé‚£æ€ä¹ˆåŠå‘¢ï¼Ÿæˆ‘ä»¬éœ€è¦å°†å®ƒç»™â€œå½’ä¸€åŒ–â€ï¼Œä¹Ÿå°±æ˜¯å°†å€¼ç¼©å°åˆ°`[0.,1.]`ä¹‹é—´ã€‚

```glsl
void mainImage(out vec4 fragColor,in vec2 fragCoord){
    // iResolution.xyæ˜¯åæ ‡ç”»å¸ƒ
    vec2 uv=fragCoord/iResolution.xy;
    fragColor=vec4(uv.x,uv.y,0,1);
}
```
![uvåæ ‡é¢œè‰²å˜åŒ–](./assets/uvåæ ‡é¢œè‰²å˜åŒ–.png)

ä»æ•´ä½“ä¸Šå¯ä»¥çœ‹åˆ°ä¸€ä¸ªæ··åˆæ¸å˜çš„å›¾æ¡ˆã€‚è¿™æ˜¯å› ä¸ºå·¦ä¸‹è§’åŸç‚¹æ˜¯é»‘è‰²ï¼Œå€¼æ˜¯`(0,0)`ï¼Œå³ä¸‹è§’æ˜¯çº¢è‰²ï¼Œå€¼æ˜¯`(1,0)`ï¼Œå·¦ä¸Šè§’æ˜¯ç»¿è‰²ï¼Œå€¼æ˜¯`(0,1)`ï¼Œå³ä¸Šè§’æ˜¯é»„è‰²ï¼Œå€¼æ˜¯`(1,1)`ï¼Œä¸­é—´çš„æ‰€æœ‰å€¼åœ¨`(0,0)`åˆ°`(1,1)`è¿™ 2 ä¸ªåŒºé—´åˆ†å¸ƒã€‚ä»æ•´ä½“ä¸Šçœ‹ï¼Œæˆ‘ä»¬å¾—åˆ°äº†ä¸€ä¸ªæœ‰å¤šç§é¢œè‰²çš„æ¸å˜å›¾æ¡ˆã€‚

è¿™å°±æ˜¯æ‰€è°“çš„`uv`åæ ‡ï¼Œ**ä»£è¡¨äº†å›¾åƒï¼ˆè¿™é‡ŒæŒ‡ç”»å¸ƒï¼‰ä¸Šæ‰€æœ‰åƒç´ çš„å½’ä¸€åŒ–åçš„åæ ‡ä½ç½®ï¼Œå…¶ä¸­`U`ä»£è¡¨æ°´å¹³æ–¹å‘ï¼Œ`V`ä»£è¡¨å‚ç›´æ–¹å‘ã€‚**

## ç»˜åœ†
å…ˆè¯´ä¸€ä¸‹ç»˜åˆ¶åœ†å½¢çš„æ€»ä½“æ€è·¯ï¼š**å…ˆè®¡ç®—`UV`åæ ‡ä¸Šçš„ç‚¹åˆ°åŸç‚¹çš„è·ç¦»ï¼Œç„¶åæ ¹æ®è¿™äº›è·ç¦»çš„å€¼æ¥è®¾å®šå¯¹åº”çš„é¢œè‰²**

ä¸ºäº†è®¡ç®—`UV`ä¸Šç‚¹åˆ°åŸç‚¹çš„è·ç¦»ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨`GLSL`çš„å†…ç½®å‡½æ•°â€”â€”`length`å‡½æ•°æ¥å®ç°ã€‚

:::tip å…³äºåŸç‚¹
ä¸Šé¢è¯´è¿‡ï¼Œå› ä¸ºå·¦ä¸‹è§’æ˜¯åŸç‚¹ï¼Œæ‰€ä»¥å¦‚æœç»˜åˆ¶åœ†æœ€ååªèƒ½å¾—åˆ°ä¸€ä¸ªåªæœ‰å³ä¸Šæ–¹çš„åœ†ã€‚æ‰€ä»¥åº”è¯¥é€šè¿‡è®¡ç®—å°†åŸç‚¹ç§»åˆ°ä¸­é—´ï¼š`uv=(uv-.5)*2`ã€‚
:::

è¿™é‡Œè§£é‡Šä¸€ä¸‹ä¸ºä»€ä¹ˆæ˜¯`(uv-.5)*2`ï¼Œè¿™æ˜¯å› ä¸ºæˆ‘ä»¬ç›´æ¥ç§»åŠ¨çš„ä¸æ˜¯åŸç‚¹ï¼Œè€Œæ˜¯åŸç‚¹æ‰€åœ¨çš„ç”»å¸ƒï¼ä½ å¯ä»¥ç†è§£ä¸ºç§»åŠ¨çš„æ˜¯**ç›¸æœºé•œå¤´**ï¼Œä¹Ÿå°±æ˜¯åŸç‚¹æ‰€åœ¨çš„è§†å£ï¼Œå¦‚ä¸‹ç¤ºæ„å›¾ï¼š

![image](./assets/ç”»å¸ƒç§»åŠ¨åŸç†.png)

ç”±äºéœ€è¦å½’ä¸€åŒ–ï¼Œæ“ä½œçš„ç‚¹å¯èƒ½åœ¨`0.5`ä¹‹å¤–ï¼Œæ‰€ä»¥æœ€å`*2`,å°†ç”»å¸ƒç¼©å°

```glsl
void mainImage(out vec4 fragColor,in vec2 fragCoord){
    vec2 uv=fragCoord/iResolution.xy;
    uv=(uv-.5)*2.;
    float d=length(uv);
    fragColor=vec4(vec3(d),1.);
}
```
åœ¨è¿™é‡Œå®é™…ä¸Šä¼šè·å¾—ä¸€ä¸ªæ‰©æ•£çš„æ¤­åœ†
![image](./assets/æ‰©æ•£çš„æ¤­åœ†.png)

è¿™æ˜¯å› ä¸ºè§†å›¾çš„é•¿è¾¹å’ŒçŸ­è¾¹ä¸ä¸€è‡´ï¼Œåšæ³•å°±æ˜¯è®¡ç®—ä¸€ä¸‹ç”»å¸ƒçš„æ¯”ä¾‹ï¼Œç„¶åèµ‹å€¼ç»™`UV`åæ ‡å³å¯,æ³¨æ„æ˜¯ç”¨é•¿è¾¹é™¤ä»¥çŸ­è¾¹ï¼Œæˆ‘è¿™é‡Œyæ˜¯é•¿è¾¹,xæ˜¯çŸ­è¾¹

```
uv.y*=iResolution.y/iResolution.x;
```
![æ‰©æ•£çš„åœ†å½¢](./assets//æ‰©æ•£çš„åœ†å½¢.png)

ä»”ç»†è§‚å¯Ÿä¸Šå›¾ï¼Œåˆ†æå€¼çš„åˆ†å¸ƒæƒ…å†µï¼šä¸­ç‚¹çš„å€¼æ˜¯`(0,0)`ï¼Œé¢œè‰²æ˜¯çº¯é»‘è‰²ï¼Œç„¶è€Œï¼Œä»ä¸­é—´ç‚¹å¼€å§‹å‘å››å‘¨è¾å°„è¿™äº›åŒºåŸŸæ—¶ï¼Œå®ƒä»¬çš„å€¼å¼€å§‹å¤§äº0ï¼Œå°±å·²ç»ä¸å†æ˜¯çº¯é»‘è‰²äº†ã€‚
:::tip å…³äºshaderçš„å†·çŸ¥è¯†
åœ¨`Shader`ä¸­ï¼Œå€¼çš„æ˜¾ç¤ºèŒƒå›´åªä¼šæ˜¯`[0,1]`ä¹‹é—´ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå°äº`0`çš„è´Ÿæ•°å®é™…æ˜¾ç¤ºçš„æ˜¯`0`,å¤§äº`1`çš„æ•°å®é™…æ˜¾ç¤ºçš„å€¼æ˜¯`1`ã€‚
:::
æ‰€ä»¥è¦æƒ³åˆ¶é€ é»‘è‰²ï¼Œå°±å¯ä»¥é€šè¿‡è®¡ç®—å‡ºä¸€ç‰‡è´Ÿæ•°çš„åŒºåŸŸã€‚

æ€è·¯å¦‚ä¸‹ï¼šç»™è·ç¦»`d`å‡å»ä¸€ä¸ª`0.5`ï¼Œå°±å¯ä»¥å¾—åˆ°ä¸€ä¸ªåŠå¾„ä¸º`0.5`çš„åœ†ã€‚å¤§äº`0`çš„å–`1`ï¼Œå°äº`0`çš„å–`0`å³å¯ï½ï¼Œç›´æ¥ä¸Šä»£ç 

```glsl
void mainImage(out vec4 fragColor,in vec2 fragCoord){
    vec2 uv=fragCoord/iResolution.xy;
    uv=(uv-.5)*2.;
    uv.y*=iResolution.y/iResolution.x;
    float d=length(uv);
    d=d-.5;
    float color = 0.;
    if(d>0.){
        color = 1.;
    }else{
        color = 0.;
    }
    fragColor=vec4(vec3(color),1.);
}
```
ç„¶è€Œï¼Œåœ¨Shaderç¼–å†™ä¸­ï¼Œåº”è¯¥å°½é‡é¿å…å»ä½¿ç”¨`if`è¯­å¥ï¼Œè¿™æ˜¯å› ä¸º`GPU`æ˜¯å¹¶è¡Œå¤„ç†ç»“æœçš„ï¼Œè€Œ`if`è¯­å¥ä¼šè®©å¤„ç†å™¨è¿›è¡Œåˆ†æ”¯åˆ‡æ¢è¿™ä¸€æ“ä½œï¼Œå¤„ç†å¤šä¸ªåˆ†æ”¯ä¼šé™ä½å¹¶è¡Œå¤„ç†çš„æ€§èƒ½ã€‚

æ‰€ä»¥åœ¨è¿™é‡Œå¯ä»¥é€šè¿‡ä¸€ä¸ª`GLSL`å†…ç½®çš„`step`å‡½æ•°å»æ›¿ä»£...

`step(edge,x)`å‡½æ•°åˆè¢«ç§°ä¸º**é˜¶æ¢¯å‡½æ•°**ï¼Œå½“è¾“å…¥å€¼`x`å¤§äº`edge`å€¼æ—¶è¿”å›`1`ï¼Œåä¹‹è¿”å›`0`

```glsl
void mainImage(out vec4 fragColor,in vec2 fragCoord){
    vec2 uv=fragCoord/iResolution.xy;
    uv=(uv-.5)*2.;
    uv.y*=iResolution.y/iResolution.x;
    float d=length(uv);
    d=d-.5;
    float color=step(0.,d);
    fragColor=vec4(vec3(color),1.);
}
```
æœ€åå¾—åˆ°çš„åœ†å¦‚ä¸‹

![image](./assets/é˜¶æ¢¯å‡½æ•°å®ç°åœ†.png)

ç”»å‡ºæ¥çš„å›¾åƒä¼šå‘ç°æœ‰é”¯é½¿ï¼Œè¿™æ˜¯å› ä¸º`step`å‡½æ•°åœ¨`edge`å‘ç”Ÿäº†è·³å˜**ï¼ˆ0çªç„¶å˜æˆ1ï¼‰**ï¼Œå¦‚æœä½¿ç”¨å¹³æ»‘è¿‡æ¸¡`smoothstep`å‡½æ•°å°±å¯ä»¥å¾—åˆ°ä¸€ä¸ªå¹³æ»‘çš„åœ†è¾¹ç•Œã€‚

`smoothstep(edge1,edge2,x)`å‡½æ•°ï¼Œå½“xä¸åœ¨`[edge1,edge2]`çš„åŒºé—´æ—¶ï¼Œå°äº`edge1`è¿”å›`0`ï¼Œå¤§äº`edge2`è¿”å›`1`ï¼Œå¦‚æœåœ¨åŒºé—´å†…ï¼Œå°±æ˜¯å¹³æ»‘çš„è¿‡æ¸¡å€¼ã€‚

ä¿®æ”¹ä»£ç ä¸ºï¼Œå¯ä»¥å¾—åˆ°å›¾ç‰‡

```glsl
float color = smoothstep(0,0.02,d);
```
![image](./assets/smoothstepå¹³æ»‘çš„åœ†.png)

## ç»˜åˆ¶ä¸€ä¸ªå…‰çƒ
å¦‚æœå¯¹`d`å–å€’æ•°ä¼šæ€ä¹ˆæ ·ï¼Ÿå‡å¦‚`float color = .25/d;`ï¼Œå¯ä»¥å¾—åˆ°ä¸€ä¸ªåæ¯”ä¾‹å‡½æ•°ï¼Œå¦‚æœç¦»åœ†å¿ƒè¶Šè¿œï¼Œå¾—åˆ°çš„å€¼è¶Šè¶‹äº`.0`é‚£ä¹ˆå°±ä¼šè¶Šé»‘ï¼Œå¦‚æœåœ¨`0.25`ä»¥å†…å°±ä¸º`1`äº†ï¼Œä¹Ÿå°±ä¼šè¶Šäº®ã€‚
è¿™æ ·å°±å¯ä»¥å¾—åˆ°ä¸€ä¸ªå…‰çƒ

![image](./assets/å…‰çƒ.png)

## SDFå‡½æ•°
åœ¨ç»˜åˆ¶åœ†å½¢æ—¶ï¼Œé€šè¿‡`smoothstep`ç»˜åˆ¶äº†ä¸€ä¸ªæ¯”è¾ƒå¹³æ»‘çš„åœ†
```glsl
float d=length(uv);
d-=.5;
```
å¦‚æœå¯ä»¥çš„è¯ï¼Œå…¶å®å¯ä»¥å°†å…¶å°è£…ä¸ºä¸€ä¸ªå‡½æ•°ï¼Œå«åš`sdfCircle`
```glsl
float sdCircle(vec2 p,float r)
{
    return length(p)-r;
}

void mainImage(out vec4 fragColor,in vec2 fragCoord){
    vec2 uv=fragCoord/iResolution.xy;
    ...
    float d=sdCircle(uv,.5);
    ...
}
```
**`SDF`**ï¼Œä¸­æ–‡ç¿»è¯‘ä¸ºâ€œ**è·ç¦»ç¬¦å·å‡½æ•°**â€ï¼Œå®ƒç”¨äºæè¿°ä¸€ä¸ªå‡½æ•°ï¼šå®ƒå°†ç©ºé—´é‡Œé¢çš„ä¸€ä¸ªä½ç½®ä½œä¸ºè¾“å…¥ï¼Œå¹¶è¿”å›è¯¥ä½ç½®åˆ°ç»™å®šå½¢çŠ¶çš„è·ç¦»ï¼Œå®ƒçš„å‰é¢è¿˜æœ‰ä¸€ä¸ªâ€œç¬¦å·â€ï¼Œè¿™æ˜¯å› ä¸ºåœ¨å½¢çŠ¶å¤–çš„è·ç¦»ä¸ºæ­£æ•°+ï¼Œåœ¨å½¢çŠ¶å†…çš„è·ç¦»ä¸ºè´Ÿæ•°-ï¼Œè¾¹ç•Œå¤„æ°å¥½ä¸º0ã€‚

:::info sdfå¤§ç¥ï¼
å›¾å½¢å­¦å¤§ç¥Inigo Quilez(ç®€ç§°iq)çš„åšå®¢ä¸ŠæŠŠå¸¸ç”¨çš„`2D`å›¾åƒçš„`SDF`å‡½æ•°éƒ½åˆ—äº†å‡ºæ¥ï¼Œ[ç‚¹å‡»æˆ‘æŸ¥é˜…ğŸ˜¯](https://iquilezles.org/articles/distfunctions2d/)
:::

æ¯”å¦‚è¿™å°±æ˜¯ä¸ªçŸ©å½¢çš„sdfå‡½æ•°ï¼
```glsl
float sdBox(in vec2 p,in vec2 b)
{
    vec2 d=abs(p)-b;
    return length(max(d,0.))+min(max(d.x,d.y),0.);
}

void mainImage(out vec4 fragColor,in vec2 fragCoord){
    vec2 uv=fragCoord/iResolution.xy;
    uv=(uv-.5)*2.;
    uv.x*=iResolution.x/iResolution.y;

    float d=sdBox(uv,vec2(.6,.3));
    float c=smoothstep(0.,.02,d);
    fragColor=vec4(vec3(c),1.);
}
```
è¿™å°±ç”»å‡ºäº†ä¸€ä¸ªé•¿ä¸º`0.6`ï¼Œå®½ä¸º`0.3`çš„é•¿æ–¹å½¢ã€‚

æ¯”å¦‚è¿™ä¸ªæ˜¯ä¸‰è§’å½¢çš„sdfå‡½æ•°
```glsl
float sdEquilateralTriangle(in vec2 p,in float r)
{
    const float k=sqrt(3.);
    p.x=abs(p.x)-r;
    p.y=p.y+r/k;
    if(p.x+k*p.y>0.)p=vec2(p.x-k*p.y,-k*p.x-p.y)/2.;
    p.x-=clamp(p.x,-2.*r,0.);
    return-length(p)*sign(p.y);
}
```
è¿™é‡Œå°±ä¸è´´å›¾å•¦ï¼Œç›´æ¥ç²˜ä»£ç å¯ä»¥æŸ¥çœ‹ğŸ˜

## UVå˜æ¢
åŸºäºè¿™ä¸ªé•¿æ–¹å½¢ï¼Œæˆ‘ä»¬å¯ä»¥åšä¸€äº›å˜æ¢ï¼
:::tip UVå˜æ¢çš„å°æç¤º
è®°ä½è¿™ä¸ª2ä¸ªç‚¹ï¼š
1.å†æ¬¡æç¤ºï¼Œç§»åŠ¨çš„åæ ‡å…¶å®æ˜¯ç§»åŠ¨çš„ç”»å¸ƒè§†å£ï¼ˆç›¸æœºé•œå¤´ï¼‰ã€‚
2.UVå˜æ¢çš„ä»£ç éœ€è¦å†™åˆ°SDFå‡½æ•°ä¹‹å‰
:::

### å¹³ç§»
```glsl
uv.x+=.2;
uv.y+=.4;
```
ç›¸å½“äºè§†å£å‘å³ç§»åŠ¨`0.2`ï¼Œå‘ä¸Šç§»åŠ¨`0.4`ï¼Œæ‰€ä»¥çŸ©å½¢å‡ºç°åœ¨å·¦ä¸‹æ–¹ã€‚

![image](./assets/uvå¹³ç§»çŸ©å½¢.png)

### ç¼©æ”¾
```glsl
uv *= vec2(2.,2.);
```
ç›¸å½“äºæ”¾å¤§çš„æ˜¯è§†å£å¤§å°ï¼Œæ‰€ä»¥çŸ©å½¢ä¼šå˜å°ï¼Œå°±å¥½åƒç›¸æœºé•œå¤´å‘ä¸ŠæŠ¬äº†2å€çš„è·ç¦»ã€‚
![image](./assets/uvç¼©æ”¾çŸ©å½¢.png)

### ç¿»è½¬
ç”±äºçŸ©å½¢æ˜¯å¯¹ç§°çš„å›¾æ¡ˆï¼Œæ‰€ä»¥è¿™é‡Œä½¿ç”¨ä¸‰è§’å½¢çš„sdfå‡½æ•°è¿›è¡Œæ¼”ç¤º

```glsl
float sdEquilateralTriangle(in vec2 p,in float r)
{
    const float k=sqrt(3.);
    p.x=abs(p.x)-r;
    p.y=p.y+r/k;
    if(p.x+k*p.y>0.)p=vec2(p.x-k*p.y,-k*p.x-p.y)/2.;
    p.x-=clamp(p.x,-2.*r,0.);
    return-length(p)*sign(p.y);
}

void mainImage(out vec4 fragColor,in vec2 fragCoord){
    vec2 uv=fragCoord/iResolution.xy;
    uv=(uv-.5)*2.;
    uv.x*=iResolution.x/iResolution.y;
    uv*=vec2(2.,2.);
    float d=sdEquilateralTriangle(uv,.3);
    float c=smoothstep(0.,.02,d);
    fragColor=vec4(vec3(c),1.);
}
```
å¦‚æœæŒ‰`x`è½´ç¿»è½¬ï¼Œç»™uvçš„`y`åæ ‡ä¹˜`-1`å³å¯ã€‚
![image](./assets/uvç¿»è½¬ä¸‰è§’å½¢.png)

### æ—‹è½¬
æ—‹è½¬æ“ä½œå®é™…ä¸Šä¼šæ›´åŠ å¤æ‚ä¸€æ ·ï¼Œè¿™é‡Œå°è£…å¥½äº†ç°æˆçš„å‡½æ•°åº“[glsl-rotate](https://github.com/dmnsgn/glsl-rotate)å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œä¸‹é¢æˆªå–ä¸€æ®µ`2D`æ—‹è½¬ç›¸å…³çš„ä»£ç 
```glsl
mat2 rotation2d(float angle){
    float s=sin(angle);
    float c=cos(angle);

    return mat2(
        c,-s,
        s,c
    );
}

vec2 rotate(vec2 v,float angle){
    return rotation2d(angle)*v;
}
```
å› ä¸ºæ—‹è½¬å’Œè§’åº¦æœ‰å…³ï¼Œå¦‚æœæ‡‚ä¸€ç‚¹ä¸‰è§’å‡½æ•°å°±å¯ä»¥çŸ¥é“ï¼Œè¿˜éœ€è¦ä¸€ä¸ª`PI`ï¼Œæ‰€ä»¥è¿˜éœ€è¦è®¾ç½®ä¸€ä¸ª`const float PI=3.14159265358;`ï¼Œç„¶åå°è¯•è®©ä¸‰è§’å½¢è¿›è¡Œä¸€ä¸ªé¡ºæ—¶é’ˆæ—‹è½¬`90deg`
```
uv=rotate(uv,PI/2.);
```
![image](./assets/æ—‹è½¬ä¸‰è§’å½¢.png)

### é‡å¤
åƒå®ç°é‡å¤ï¼Œå°±éœ€è¦ä½¿ç”¨åˆ°ä¸€ä¸ªæ–°çš„å†…ç½®å‡½æ•°`fract`ï¼Œå®ƒçš„ä½œç”¨æ˜¯è·å–ä¸€ä¸ªæ•°çš„å°æ•°éƒ¨åˆ†ã€‚
æ¯”å¦‚`fract(114.514)`ï¼Œè¿”å›çš„å€¼å°±æ˜¯`0.514`ã€‚

å®ƒä¹‹æ‰€ä»¥èƒ½å®ç°é‡å¤å°±åœ¨äºæ¯”å¦‚`(+1.3, +1.3)`,`(-1.3, +1.3)`,`(-1.3, -1.3)`,`(+1.3, -1.3)`è¿™å››ä¸ªå¤„åœ¨ä¸åŒè±¡é™çš„ç‚¹ï¼Œé€šè¿‡`fract`å‡½æ•°éƒ½è¢«å¤„ç†æˆäº†ä¸€ä¸ªç‚¹åæ ‡`(0.3,0.3)`

æ¯”å¦‚ä¸‹é¢çš„è¿™æ®µä»£ç 
```glsl
void mainImage(out vec4 fragColor,in vec2 fragCoord){
    vec2 uv=fragCoord/iResolution.xy;
    
    uv=fract(uv*vec2(2.,2.));
    
    uv=(uv-.5)*2.;
    uv.x*=iResolution.x/iResolution.y;
    uv*=vec2(2.,2.);
    
    float d=sdEquilateralTriangle(uv,.5);
    float c=smoothstep(0.,.02,d);
    fragColor=vec4(vec3(c),1.);
}


```
æœ€åå®ç°çš„æ•ˆæœå¦‚ä¸‹
![å››ä¸ªé‡å¤ä¸‰è§’å½¢](./assets/å››ä¸ªé‡å¤ä¸‰è§’å½¢.png)

### é•œåƒ
`abs`å†…ç½®å‡½æ•°å¯ä»¥è·å–ä¸€ä¸ªæ•°çš„ç»å¯¹å€¼ä»è€Œå®ç°é•œåƒï¼Œä½¿ç”¨`uv.y=abs(uv.y)`å®ç°å…³äºxè½´å¯¹ç§°é•œåƒï¼Œä½¿ç”¨`uv.x=abs(uv.x)`å®ç°å…³äºyè½´å¯¹ç§°é•œåƒã€‚

ä»£ç å¦‚ä¸‹ï¼š
```glsl
void mainImage(out vec4 fragColor,in vec2 fragCoord){
    vec2 uv=fragCoord/iResolution.xy;
    uv=(uv-.5)*2.;

    uv.y=abs(uv.y);
    
    uv.x*=iResolution.x/iResolution.y;
    uv*=vec2(2.,2.);
    
    float d=sdEquilateralTriangle(uv,.5);
    float c=smoothstep(0.,.02,d);
    fragColor=vec4(vec3(c),1.);
}
```
![å››ä¸ªé‡å¤ä¸‰è§’å½¢](./assets/é•œåƒä¸‰è§’å½¢.png)

## SDFå›¾å½¢å˜æ¢
é™¤äº†UVä»¥å¤–ï¼Œ`SDF`æœ¬èº«çš„å½¢çŠ¶ä¹Ÿæ˜¯å¯ä»¥æ”¹å˜çš„ï¼Œè¿™äº›å½¢å˜å‡½æ•°åœ¨`iq`çš„åšå®¢ä¸Šä¹Ÿæœ‰æä¾›ï¼Œå¯ä»¥ç›´æ¥å¤åˆ¶ç²˜è´´è¿‡æ¥ã€‚

ä¸‹é¢åªç»™å‡ºä¸€äº›ä»£ç å’Œè¯´æ˜ï¼Œä¸ç»™å…·ä½“å›¾ä¾‹ï¼Œæ•ˆæœè‡ªå·±å¯ä»¥ç²˜å»çœ‹ä¸€ä¸‹~

```glsl
float opRound(in float d,in float r)
{
    return d-r;
}
// åœ†è§’
d = opRound(d,.1)


float opOnion(in float d,in float r)
{
    return abs(d)-r;
}
// é•‚ç©º
d = opOnion(d,.1)

```

## SDF å¸ƒå°”è¿ç®—
`SDF`å‡½æ•°æœ¬èº«èƒ½ç»˜åˆ¶å‡ºå¾ˆå¤šå½¢çŠ¶ï¼Œä½†æ•°é‡ä¹Ÿæ˜¯æœ‰é™çš„ï¼Œæ¯”å¦‚è¯´ä½ æƒ³ç”»ä¸ªæ˜Ÿå½¢ï¼Œå¯ä»¥ç”¨è¿™ä¸ªå½¢çŠ¶æ‰€å¯¹åº”çš„å‡½æ•°sdStaræ¥å®ç°ï¼Œä½†æ˜¯å¦‚æœè¦ç”»ä¸€ä¸ªç¬‘è„¸çš„å½¢çŠ¶å°±æ¯”è¾ƒå›°éš¾äº†ã€‚ä½†æ˜¯åªè¦æŠŠå‡ ä¸ªåœ†å½¢å’Œä¸€æ¡å¼¯æ›²çš„æ›²çº¿ç»„åˆåœ¨ä¸€èµ·ï¼Œä¹Ÿèƒ½ç”»å‡ºç¬‘è„¸ã€‚

è¿™å°±éœ€è¦ä½¿ç”¨åˆ°`SDF`çš„ä¸‰ç§è¿ç®—æ–¹å¼ï¼šå¹¶`(Union)`ï¼Œäº¤`(Intersection)`ï¼Œå·®`(Subtraction)`ã€‚

è¿™ä¸‰ä¸ªå‡½æ•°æˆ‘è¿™è¾¹ç›´æ¥åˆ—ä¸¾å‡ºæ¥å…ˆï¼š
```glsl
float opUnion(float d1,float d2)
{
    return min(d1,d2);
}

float opIntersection(float d1,float d2)
{
    return max(d1,d2);
}

float opSubtraction(float d1,float d2)
{
    return max(-d1,d2);
}

```